{"version":3,"sources":["webpack:///webpack/bootstrap 0673d96a2c5dad7c42f1","webpack:///./index.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA,iBAAgB,aAAa;AAC7B,8EAA6E,mFAAmF;AAChK,IAAG;AACH;AACA,4EAA2E,cAAc;AACzF;AACA;AACA;AACA;AACA,4CAA2C,4CAA4C;AACvF;AACA;AACA,wBAAuB;AACvB;AACA;AACA,wBAAuB;AACvB;AACA;AACA;AACA,6GAA4G,uCAAuC,qCAAqC;AACxL;AACA,IAAG;AACH;AACA,+BAA8B,cAAc;AAC5C,qDAAoD,uDAAuD,uCAAuC;AAClJ;AACA,IAAG;AACH;AACA,iBAAgB,cAAc;AAC9B,+BAA8B;AAC9B,IAAG;AACH;AACA,oDAAmD,YAAY,oBAAoB,sCAAsC,KAAK;AAC9H,4CAA2C,aAAa,UAAU,+CAA+C;AACjH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAgB,sBAAsB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;;AAEF;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA,M;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,mEAAkE,mBAAmB;AACrF,IAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,K;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;;AAEA,kEAAiE,mBAAmB;AACpF,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,KAAI;AACJ;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;;;;;;AAMA;AACA;;AAEA;AACA;AACA,wEAAuE,mBAAmB;AAC1F,MAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,O;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA,0EAAyE,mBAAmB;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,mBAAmB;;AAEpC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 0673d96a2c5dad7c42f1\n **/","var docCookies = {\n  getItem: function (sKey) {\n    if (!sKey) { return null; }\n    return decodeURIComponent(document.cookie.replace(new RegExp(\"(?:(?:^|.*;)\\\\s*\" + encodeURIComponent(sKey).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\\\\s*([^;]*).*$)|^.*$\"), \"$1\")) || null;\n  },\n  setItem: function (sKey, sValue, vEnd, sPath, sDomain, bSecure) {\n    if (!sKey || /^(?:expires|max\\-age|path|domain|secure)$/i.test(sKey)) { return false; }\n    var sExpires = \"\";\n    if (vEnd) {\n      switch (vEnd.constructor) {\n        case Number:\n          sExpires = vEnd === Infinity ? \"; expires=Fri, 31 Dec 9999 23:59:59 GMT\" : \"; max-age=\" + vEnd;\n          break;\n        case String:\n          sExpires = \"; expires=\" + vEnd;\n          break;\n        case Date:\n          sExpires = \"; expires=\" + vEnd.toUTCString();\n          break;\n      }\n    }\n    document.cookie = encodeURIComponent(sKey) + \"=\" + encodeURIComponent(sValue) + sExpires + (sDomain ? \"; domain=\" + sDomain : \"\") + (sPath ? \"; path=\" + sPath : \"\") + (bSecure ? \"; secure\" : \"\");\n    return true;\n  },\n  removeItem: function (sKey, sPath, sDomain) {\n    if (!this.hasItem(sKey)) { return false; }\n    document.cookie = encodeURIComponent(sKey) + \"=; expires=Thu, 01 Jan 1970 00:00:00 GMT\" + (sDomain ? \"; domain=\" + sDomain : \"\") + (sPath ? \"; path=\" + sPath : \"\");\n    return true;\n  },\n  hasItem: function (sKey) {\n    if (!sKey) { return false; }\n    return (new RegExp(\"(?:^|;\\\\s*)\" + encodeURIComponent(sKey).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\")).test(document.cookie);\n  },\n  keys: function () {\n    var aKeys = document.cookie.replace(/((?:^|\\s*;)[^\\=]+)(?=;|$)|^\\s*|\\s*(?:\\=[^;]*)?(?:\\1|$)/g, \"\").split(/\\s*(?:\\=[^;]*)?;\\s*/);\n    for (var nLen = aKeys.length, nIdx = 0; nIdx < nLen; nIdx++) { aKeys[nIdx] = decodeURIComponent(aKeys[nIdx]); }\n    return aKeys;\n  }\n};\n\nfunction getRandomIntInclusive(min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nfunction createElement(name, attributes) {\n\tvar node = document.createElement(name);\n\tif (attributes) {\n\t\tfor (var attr in attributes) {\n\t\t\tif (attributes.hasOwnProperty(attr)) {\n\t\t\t\tnode.setAttribute(attr, attributes[attr]);\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (var i = 2; i < arguments.length; i++) {\n\t\tvar child = arguments[i];\n\t\tif (typeof child == 'string') {\n\t\t\tchild = document.createTextNode(child);\n\t\t}\n\t\tnode.appendChild(child);\n\t}\n\treturn node;\n}\nfunction createBarrier(id, commonClass, message) {\n\tvar registerElt = createElement('a', {\n\t\t'href': 'http://user.ftchinese.com/register/?ccode=1B110427',\n\t\t'class': 'o-register'\n\t}, '免费注册');\n\tvar loginElt = createElement('a', {\n\t\t'href': 'http://user.ftchinese.com/login',\n\t\t'class': 'o-login'\n\t}, '登录');\n\n\tvar actionWrapper = createElement('div', {\n\t\t'class': 'o-barrier__action'\n\t}, registerElt, loginElt);\n\tvar messageElt = createElement('p', {\n\t\t'class': 'o-barrier__message'\n\t}, '亲爱的读者，您在30天内连续阅读了8篇以上文章，如果您喜欢FT中文网，我们诚邀您登录访问或免费注册为FT中文网的会员。');\n\tvar closeElt = createElement('button', {\n\t\t'class': 'o-barrier__close'\n\t}, '阅读完本文以后再注册或登录');\n\n\tvar barrierWrapper = createElement('div', {\n\t\t'class': 'o-barrier__wrapper'\n\t}, messageElt, actionWrapper, closeElt);\n\n\tvar barrierElt = createElement('div', {\n\t\t'class': 'o-barrier',\n\t\t'id': id\n\t}, barrierWrapper);\n\n\treturn barrierElt;\n}\n\nfunction recordAction(type, category) {\n\ttry {\n\t\tga('send', 'event', 'Barrier ' + type, category, window.FTStoryid);\n\t} catch(err) {\n\t\tconsole.log('send', 'event', type, category)\n\t}\n}\n\nfunction barrierOnButtom(elm) {\n\tvar oldClassName = elm.className;\n\tif (oldClassName.indexOf('--bottom') === -1) {\n\t\telm.className = oldClassName + ' ' + oldClassName + '--bottom';\n\t\tvar msgElm = elm.querySelector('.o-barrier__message');\n\t\tmsgElm.innerHTML = '欢迎来到FT中文网，我们诚邀您登录访问或免费注册为FT中文网会员。';\n\t\treturn false\n\t}\n\treturn true;\n}\n\nfunction abTest() {\n\tconst rand = getRandomIntInclusive(0, 0);\n\tconsole.log('rand number: ', rand);\n\n\tconst barrierNew = createBarrier('barrier-new');\n\n\tdocument.body.appendChild(barrierNew);\n\n\tconst oBarrierInstances = [\n\t\t{\n\t\t\telt: barrierNew,\n\t\t\ttype: 'Barrier Page New',\n\t\t\tevents: {\n\t\t\t\t'o-barrier': function(e, type) {\n\t\t\t\t\t// e.currentTarget.style.display = 'none';\n\t\t\t\t\tif (!barrierOnButtom(e.currentTarget)) {\n\t\t\t\t\t\trecordAction(type, 'Click Close BG');\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t'o-barrier__close': function(e, type) {\n\t\t\t\t\t// e.currentTarget.style.display = 'none';\n\t\t\t\t\tif (!barrierOnButtom(e.currentTarget)) {\n\t\t\t\t\t\trecordAction(type, 'Click Close Button');\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t'o-register': function(e, type) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tif (barrierOnButtom(e.currentTarget)) {\n\t\t\t\t\t\trecordAction(type + ' bottom', 'Register');\n\t\t\t\t\t} else {\n\t\t\t\t\t\trecordAction(type, 'Register');\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t'o-login': function(e, type) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tif (barrierOnButtom(e.currentTarget)) {\n\t\t\t\t\t\trecordAction(type + ' bottom', 'Log In');\n\t\t\t\t\t} else {\n\t\t\t\t\t\trecordAction(type, 'Log In');\n\t\t\t\t\t}\n\t\t\t\t}\t\t\t\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\telt: document.getElementById('overlay-login'),\n\t\t\ttype: 'Barrier Page',\n\t\t\tevents: {\n\t\t\t\t'register': function(e, type) {\n\t\t\t\t\trecordAction(type, 'Register');\n\t\t\t\t},\n\n\t\t\t\t'findPassword': function(e, type) {\n\t\t\t\t\trecordAction(type, 'Find Password');\n\t\t\t\t},\n\n\t\t\t\t'logIn': function(e, type) {\n\t\t\t\t\t// e.preventDefault();\n\t\t\t\t\trecordAction(type, 'Log In');\n\t\t\t\t},\n\n\t\t\t\t'overlay-close': function(e, type) {\n\t\t\t\t\t// closeOverlay(e.currentTarget.id);\n\t\t\t\t\trecordAction(type, 'Click Close Button');\n\t\t\t\t},\n\n\t\t\t\t'overlay-bg': function(e, type) {\n\t\t\t\t\t// closeOverlay(e.currentTarget.id);\n\t\t\t\t\trecordAction(type, 'Click Close BG');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t];\n\n\tconst barrierType = oBarrierInstances[rand].type;\n\tconst barrierElt = oBarrierInstances[rand].elt;\n\tconst barrierEvents = oBarrierInstances[rand].events;\n\n\tif (rand === 0) {\n\t\tbarrierElt.style.display = 'block';\n\t\ttry {\n\t\t\tga('send', 'event', barrierType, 'Pop Out', window.FTStoryid, {'nonInteraction':1});\n\t\t} catch(err) {\n\t\t\tconsole.log('send', 'event', barrierType,  'Pop Out');\n\t\t}\n\n\t\tbarrierElt.onclick = function(e) {\n\t\t\tconst eventKey = e.target.className;\n\t\t\tconsole.log('clicked element className: ', eventKey);\n\n\t\t\tif (barrierEvents[eventKey]) {\n\t\t\t\tbarrierEvents[eventKey](e, barrierType);\n\t\t\t}\n\t\t};\t\n\t} else if (rand === 1) {\n\t\t// showOverlay('overlay-login');\n\t\tbarrierElt.style.display = 'block';\n\t\tconst msgElt = document.getElementById('login-reason');\n\t\tmsgElt.innerHTML = '亲爱的读者，您在' + historyDays + '天内连续阅读了' + maxStory + '篇以上文章，如果您喜欢FT中文网，我们诚邀您登录访问或<a href=\"http://user.ftchinese.com/register/?ccode=1B110427\" class=highlight>免费注册</a>为FT中文网的会员。';\n\t\t\ttry {\n\t\t\n\t\tga('send', 'event', barrierType, 'Pop Out', window.FTStoryid, {'nonInteraction':1});\n\t\t} catch(err) {\n\t\t\tconsole.log('send', 'event', barrierType,  'Pop Out');\n\t\t}\n\n\t\tbarrierElt.onclick = function(e) {\n\t\t\te.preventDefault();\n\t\t\tconst target = e.target\n\t\t\tconst className = target.className;\n\t\t\tconst tagName = target.tagName.toLowerCase();\n\t\t\tvar eventKey = '';\n\n\t\t\tif (tagName === 'a') {\n\n\t\t\t\tif (target.href.indexOf('register') !== -1) {\n\t\t\t\t\ttarget.href = 'http://user.ftchinese.com/register/?ccode=1B110427'\n\t\t\t\t\teventKey = 'register';\n\t\t\t\t} else if (target.href.indexOf('findpassword') !== -1) {\n\t\t\t\t\teventKey = 'findPassword';\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\teventKey = className;\n\t\t\t}\n\n\t\t\tconsole.log(eventKey);\n\n\t\t\tif (barrierEvents[eventKey]) {\n\t\t\t\tbarrierEvents[eventKey](e, barrierType);\n\t\t\t}\n\t\t};\n\n\t\tbarrierElt.getElementsByTagName('form')[0].onsubmit = function(e) {\n\t\t\tconst eventKey = 'logIn';\n\n\t\t\tif (barrierEvents[eventKey]) {\n\t\t\t\tbarrierEvents[eventKey](e, barrierType);\n\t\t\t}\n\t\t}\n\t}\t\n}\n/*************/\nconst maxStory = 0;\nconst storyId = '123456789';\nconst storyIdLength = 9;\nconst historyDays = 30;\nconst currentTime = Math.round(new Date().getTime() / 1000);\nconsole.log('currentTime', currentTime);\n\nvar viewStartTime = docCookies.getItem('viewstart') || '';\nvar viewHistory = docCookies.getItem('viewhistory') || '';\nvar userName = docCookies.getItem('USER_NAME') || '';\n\nconsole.log('viewStartTime', viewStartTime);\nconsole.log(document.cookie);\n\nif (!viewStartTime) {\n\tdocCookies.setItem('viewstart', currentTime);\n} else {\n\tvar timeElapsed = currentTime - parseInt(viewStartTime, 10);\n\tif (timeElapsed >= historyDays * 24 * 60 * 60) {\n\t\tdocCookies.removeItem('viewstart');\n\t\tdocCookies.removeItem('viewhistory');\n\t\tviewHistory = '';\n\t}\n}\n\nif (viewHistory.indexOf(storyId) < 0 && userName === '') {\n\tviewHistory += storyId;\n\tif (viewHistory.length > maxStory * storyIdLength) {\n\t\tabTest();\n\t} else {\n\t\tdocCookies.setItem('viewhistory', viewHistory);\n\t}\n}\n/*********/\n\n\n\n\t\n\n// if (rand === 0) {\n// \tconst barrierType = oBarrierInstances[rand].type;\n\n// \tbarrierElt.style.display = 'block';\n// \ttry {\n// \t\tga('send', 'event', 'Barrier Page', 'Pop Out', window.FTStoryid, {'nonInteraction':1});\n// \t} catch(err) {\n// \t\tconsole.log('send', 'event', 'Barrier New',  'Pop Out');\n// \t}\n\n// \tbarrierElt.onclick = function(e) {\n// \t\tconst targetClassName = e.target.className;\n\n// \t\tif (oBarrierEvents[targetClassName]) {\n// \t\t\toBarrierEvents[targetClassName](e, barrierType);\n// \t\t}\n// \t};\t\n// } else if (rand === 1) {\n// \tconst overLayLogin = document.querySelector('#overlay-login');\n// \t// overLayLogin.classList.add('on');\n// \toverLayLogin.style.display = 'block';\n// \tdocument.getElementById('login-reason').innerHTML = '亲爱的读者，您在 30 天内连续阅读了 8 篇以上文章，如果您喜欢FT中文网，我们诚邀您登录访问或<a href=\"http://user.ftchinese.com/register/?ccode=1B110427\" class=highlight>免费注册</a>为FT中文网的会员。';\n// \t// ga('send', 'event', 'Barrier Page', 'Pop Out', window.FTStoryid, {'nonInteraction':1});\n// \tconsole.log('popout');\n// \tvar ele = document.getElementById('overlay-login');\n// \tvar form = ele.getElementsByTagName('form')[0];\n// \tform.onsubmit = function (e) {\n// \t\t// ga('send', 'event', 'Barrier Page', 'Log In', window.FTStoryid);\n// \t\tconsole.log('submit');\n// \t\te.preventDefault()\n// \t};\n// \tvar register = ele.getElementsByTagName('a');\n// \tfor (var i=0; i<register.length; i++) {\n\t\t\n// \t\tregister[i].onclick = function(e) {\n// \t\t\tconsole.log('click regeter');\n// \t\t\te.preventDefault();\n// \t\t};\n\n// \t\t// if (register[i].href.indexOf('register')>=0) {\n// \t\t// \tregister[i].href = 'http://user.ftchinese.com/register/?ccode=1B110427';\n// \t\t// }\n// \t}\n// \tvar closeButton = ele.querySelector('.overlay-close');\n// \tcloseButton.onclick = function () {\n// \t\t// ga('send', 'event', 'Barrier Page', 'Click Close Button', window.FTStoryid);\n// \t\tconsole.log('close button')\n// \t};\n// \tvar overlayBG = ele.querySelector('.overlay-bg');\n// \toverlayBG.onclick = function () {\n// \t\t// ga('send', 'event', 'Barrier Page', 'Click Close BG', window.FTStoryid);\n// \t\tconsole.log('click close bg')\n// \t};\n// }\n/**********/\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./index.js\n ** module id = 0\n ** module chunks = 0\n **/"],"sourceRoot":""}